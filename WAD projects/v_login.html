<!DOCTYPE html>
<html lang="en">

<head>
	<title>Login</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!--===============================================================================================-->
	<link rel="icon" type="image/png" href="img/icons/favicon.ico" />
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.7.0/css/font-awesome.min.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="fonts/Linearicons-Free-v1.0.0/icon-font.min.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="css/util.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="css/lstyle.css">
	<!--===============================================================================================-->
</head>

<body>

	<div class="limiter">
		<div class="container-login" style="background-image: url('img/bg-02.jpg');">
			<div class="wrap-login p-l-110 p-r-110 p-t-62 p-b-33">
				<form class="login-form validate-form flex-sb flex-w">
					<span class="login-form-title p-b-53">Vendor Login</span>
					<div class="p-t-31 p-b-9">


						<span class="txt1">Email ID</span>
					</div>
					<div class="wrap-input100 validate-input" data-validate="Username is required">
						<input class="input100" type="text" class="form-control" id="email_id" placeholder="Enter Email id" required>
						<span class="focus-input100"></span>
					</div>
					<div class="p-t-31 p-b-9">
						<span class="txt1">Password</span>
					</div>
					<div class="wrap-input100 validate-input" data-validate="Password is required">
						<input class="input100" type="password" class="form-control" id="password" placeholder="Enter Password" required>
						<span class="focus-input100"></span>
					</div>





					<!--				<div class="container-login-form-btn m-t-17">
						<button class="login-form-btn"><a href="index.html">Sign in</a></button>
					</div>
				

				<div class="container-login-form-btn m-t-17">
					<form class="login-form-btn" action="index.html">
						<input type="Sign In" value="" />
					</form>
				</div>

-->


					<div class="container-login-form-btn m-t-17">
						<button class="login-form-btn" onclick="login()" type="button">Sign in</button>
					</div>

<script>
		function login() {
                 
				var email_id = document.getElementById("email_id").value
				var password = document.getElementById("password").value

				console.log(email_id)
				console.log(password)

				var url = 'http://localhost:3000/login'
				var data = {
						email_id,
						password
				}
				fetch(url, {
						method: "POST", // *GET, POST, PUT, DELETE, etc.
						headers: {
								"Content-Type": "application/json"
						},
						body: JSON.stringify(data), // body data type must match "Content-Type" header
				}).then((response) => {
						return response.json()
				}).then((response) => {
					
						if (response.status == 200) {
								console.log('login successful', response.data)
								alert("login successfull");
								window.location.href="/index.html";		 
						}

						else{

							console.log('login fail: ', response.error)

							alert(response.error.code);
                                        
						}

						if (response.status== 204) {
								console.log('Email and password does not match', response.data)
								alert("Email and password does not match");
								 
						}

						else { // when error
								console.log('login fail: ', response.error)	
								alert(response.error.code)
							
						}
						// alert('Record has been insert successfully')
				}).catch((err) => {
						console.log('Error occured', err)
						//alert(err)
				}) // parses response to JSON
		}
</script>


					<div class="w-full text-center p-t-55">
						<span class="txt2">Not a member?</span>

						<a href="vendorForm.html" class="txt2">Sign up now</a>
					</div>
				</form>
			</div>
		</div>
	</div>

	
	<div id="dropDownSelect1"></div>

	<!--===============================================================================================-->

	<script src="js/main.js"></script>

</body>

</html>